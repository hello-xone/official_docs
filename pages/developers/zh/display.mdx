import { Steps } from 'nextra/components';
import { Link } from "@nextui-org/react";
import DynamicLangLink from '@/components/LangLink.tsx';

# 显示代币

当用户打开 <Link className='text-primaryHue' isExternal showAnchorIcon href="https://metamask.io/">MetaMask</Link> 时，最初只能看到部分主要代币。要显示其他自定义的 <DynamicLangLink className='text-primaryHue' showAnchorIcon basePath='/developers/standard' subPath='/erc20'>ERC-20 代币</DynamicLangLink>，用户必须启用代币自动检测功能或手动添加代币。同样地，<DynamicLangLink className='text-primaryHue' showAnchorIcon basePath='/developers/standard' subPath='/erc721'>对于 NFT</DynamicLangLink>，用户需要启用 NFT 自动检测功能或手动添加它们。

本教程可以通过更轻松地 <Link className='text-primaryHue' isExternal showAnchorIcon href="https://support.metamask.io/zh-cn/managing-my-tokens/custom-tokens/how-to-display-tokens-in-metamask/">在 MetaMask 中管理和查看代币</Link> 来提升用户体验。

## 显示 ERC-20 代币

使用 `wallet_watchAsset RPC` 方法实现无缝集成。

为了提供更友好的用户体验，请在您的 DApp 中集成 <Link className='text-primaryHue' isExternal showAnchorIcon href="https://docs.metamask.io/wallet/reference/json-rpc-methods/wallet_watchasset/">wallet_watchAsset</Link> 方法。该方法允许用户轻松添加代币，而无需手动输入合约详情。

## 开始使用！

<Steps>
### 步骤 1：JavaScript 集成

在您的 DApp 代码中添加以下函数：

``` js showLineNumbers copy filename="example.js"
async function addTokenToMetaMask() {
    const tokenAddress = '0xYourTokenContractAddress';
    const tokenSymbol = 'SYM';
    const tokenDecimals = 18;
    const tokenImage = 'https://path.to/your/token-image.png';
 
    try {
        const wasAdded = await ethereum.request({
            method: 'wallet_watchAsset',
            params: {
                type: 'ERC20',
                options: {
                    // 代币合约地址
                    address: tokenAddress,
                    // 代币符号，最多5个字符
                    symbol: tokenSymbol,
                    // 代币小数位数
                    decimals: tokenDecimals,
                    // 代币Logo的URL地址
                    image: tokenImage,
                },
            },
        });
 
        if (wasAdded) {
            console.log('代币添加成功');
        } else {
            console.log('代币未添加');
        }
    } catch (error) {
        console.error(error);
    }
}
```

### 步骤 2：提示用户

在适当的时机调用此函数，例如在代币购买后或用户引导过程中，提示用户将代币添加到他们的 MetaMask 钱包。

### 步骤 3：在 MetaMask 中确认添加

当调用 `wallet_watchAsset` 函数时，MetaMask 将提示用户添加指定的自定义代币。用户需要在 MetaMask 界面中确认此操作。

</Steps>
import {Card, CardHeader, CardBody, CardFooter, Divider, Link, Image, Button} from "@nextui-org/react";
import {Table, TableHeader, TableColumn, TableBody, TableRow, TableCell } from "@nextui-org/react";
import { Tabs } from 'nextra/components';
import ContactInfo from "@/components/ContactInfo";

# 什么是 Xone 纪元

随着在区块高度 `# 6397023` 通过<DynamicLangLink className='text-primaryHue' showAnchorIcon basePath='/blog/bulletin' subPath='/hard-fork'>硬分叉成功激活新的 `epochs` 模块</DynamicLangLink>，Xone Chain 现在采用了**标准化和模块化的纪元系统**，其灵感来自 [Evmos Epochs](https://docs.evmos.org/protocol/modules/epochs)，实现了灵活、可组合且链上管理的时间周期。

升级后的模块为链上逻辑提供了一个**通用的时间周期调度器**，支持在**每个纪元结束时**动态触发网络级事件（奖励、验证者更新、治理等），所有这些都通过配置实现，无需硬编码逻辑。

## 纪元的定义和规则

### 什么是纪元？

**纪元**是由区块高度间隔定义的重复周期，在此期间会触发某些预定逻辑。纪元模块管理多个**命名的纪元标识符**（例如 `day`、`staking`、`distribution`），每个标识符都有独立的周期。

- 出块时间：≈ 1.3 秒/区块
- 自然时间跨度：\
  `hour` = 1 小时 (3600秒)\
  `day` = 1 天 (86400秒)\
  `week` = 7 天 (604800秒)
- 执行：注册的钩子（`BeforeEpochStart`、`AfterEpochEnd`）会自动触发

**动态周期性：** 在每个纪元结束时，网络将自动触发预设的链上操作（如奖励结算、验证者轮换）并开始新的周期。这种设计使 Xone Chain 的运行节奏清晰且规律。

## 纪元的核心规则

<div className="overflow-x-auto">
  <Table key={new Date().getTime()} removeWrapper aria-label="XOC 募资表" className="mt-2">
    <TableHeader>
      <TableColumn key="parameter">参数</TableColumn>
      <TableColumn key="value">值</TableColumn>
      <TableColumn key="explain">描述</TableColumn>
    </TableHeader>
    <TableBody>
      <TableRow key="1">
        <TableCell>纪元标识符</TableCell>
        <TableCell>`day`</TableCell>
        <TableCell>默认纪元名称；可以添加自定义标识符。</TableCell>
      </TableRow>
      <TableRow key="2">
        <TableCell>纪元间隔</TableCell>
        <TableCell>86400秒</TableCell>
        <TableCell>1 天。</TableCell>
      </TableRow>
      <TableRow key="3">
        <TableCell>当前纪元编号</TableCell>
        <TableCell>动态递增</TableCell>
        <TableCell>可以使用模块 API 在链上查询。</TableCell>
      </TableRow>
      <TableRow key="4">
        <TableCell>钩子</TableCell>
        <TableCell>`BeforeEpochStart`/`AfterEpochEnd`</TableCell>
        <TableCell>触发质押、分配、治理逻辑。</TableCell>
      </TableRow>
    </TableBody>
  </Table>
</div>

## 纪元的核心功能

### 奖励分配和质押经济

**周期性奖励结算：** 所有网络参与者的质押奖励、交易费分成等在每个纪元结束时统一结算和分配。示例：如果您在 `纪元 #100` 中质押代币，奖励将在 `纪元 #100` 结束时记入您的账户；您也可以理解为在 `纪元 #101` 开始时结算。

**透明且可验证：** 用户可以通过区块浏览器实时跟踪纪元进度和预期收益。

### 验证者（节点）轮换

去中心化轮换机制：在每个纪元结束时，Xone Chain 根据质押权重和随机算法选择下一个周期的验证者，以防止权力集中。

**公平性：** 新验证者需要等待纪元切换才能生效。

**安全性：** 频繁轮换降低了长期攻击的风险。

### 协议治理和升级

**链上治理窗口：** 重大协议升级或参数调整提案（如手续费率、通胀模型）必须在完整的纪元周期内进行投票，并在下一个纪元生效。示例：如果提案在 `纪元 #101` 中通过，则从 `纪元 #102` 开始执行。

### 网络状态快照

**检查点：** 在每个纪元结束时生成链状态快照，以便轻<DynamicLangLink className='text-primaryHue' showAnchorIcon basePath='/study' subPath='/nodes'>节点</DynamicLangLink>快速同步和验证数据完整性。

## 🔧 与升级前的纪元逻辑相比有哪些变化？

<div className="overflow-x-auto">
  <Table key={new Date().getTime()} removeWrapper aria-label="XOC 募资表" className="mt-2">
    <TableHeader>
      <TableColumn key="parameter">方面</TableColumn>
      <TableColumn key="value">旧逻辑</TableColumn>
      <TableColumn key="explain">新模块</TableColumn>
    </TableHeader>
    <TableBody>
      <TableRow key="1">
        <TableCell>纪元定义</TableCell>
        <TableCell>核心代码中嵌入的固定区块间隔逻辑。</TableCell>
        <TableCell>完全模块化，具有命名的纪元。</TableCell>
      </TableRow>
      <TableRow key="2">
        <TableCell>触发逻辑</TableCell>
        <TableCell>与质押/分配紧密耦合。</TableCell>
        <TableCell>解耦，基于钩子的逻辑。</TableCell>
      </TableRow>
      <TableRow key="3">
        <TableCell>可定制性</TableCell>
        <TableCell>难以更改（需要代码更新）。</TableCell>
        <TableCell>完全可通过参数或治理配置</TableCell>
      </TableRow>
      <TableRow key="4">
        <TableCell>可用性</TableCell>
        <TableCell>单一用途（质押/奖励）。</TableCell>
        <TableCell>多用途，可被多个模块重复使用。</TableCell>
      </TableRow>
      <TableRow key="5">
        <TableCell>治理</TableCell>
        <TableCell>无控制权。</TableCell>
        <TableCell>纪元间隔和钩子逻辑可通过治理控制。</TableCell>
      </TableRow>
    </TableBody>
  </Table>
</div>

## 🚀 新纪元设计的好处

* **高度可定制性**：支持多个纪元标识符和参数。
* **链上灵活性**：纪元行为可通过治理提案配置和升级。
* **模块化钩子**：模块可以独立注册以响应纪元变化。
* **可预测性**：清晰的周期简化了应用程序行为规划。

## 与其他区块链纪元的比较

为了帮助理解 Xone Chain 的纪元设计，以下是主流公链类似机制的对比：

<div className="overflow-x-auto">
  <Table key={new Date().getTime()} removeWrapper aria-label="XOC 其他区块链" className="mt-2" defaultSelectedKeys={["4"]} selectionMode="single">
    <TableHeader>
      <TableColumn key="chain">公链</TableColumn>
      <TableColumn key="epoch">纪元</TableColumn>
      <TableColumn key="purpose">核心目的</TableColumn>
      <TableColumn key="features">设计特点</TableColumn>
    </TableHeader>
    <TableBody>
      <TableRow key="1">
        <TableCell>Solana</TableCell>
        <TableCell>~2-3 天（动态调整）</TableCell>
        <TableCell>通胀奖励分配、验证者权重更新</TableCell>
        <TableCell>动态周期适应网络性能变化</TableCell>
      </TableRow>
      <TableRow key="2">
        <TableCell>Ethereum 2.0</TableCell>
        <TableCell>32 个区块（约 6.4 分钟）</TableCell>
        <TableCell>验证者委员会轮换、最终性确认</TableCell>
        <TableCell>高频协调，短期适应 PoS 共识</TableCell>
      </TableRow>
      <TableRow key="3">
        <TableCell>Cardano</TableCell>
        <TableCell>432,000 个区块（约 5 天）</TableCell>
        <TableCell>质押奖励分配、Slot Leader 选举</TableCell>
        <TableCell>自然时间对齐，强调质押经济周期</TableCell>
      </TableRow>
      <TableRow key="4">
        <TableCell>Xone Chain</TableCell>
        <TableCell>`3600秒`/`86400秒`/`604800秒`</TableCell>
        <TableCell>奖励分配、验证者轮换、治理生效</TableCell>
        <TableCell>高度可定制性、灵活性、模块化、可预测性</TableCell>
      </TableRow>
    </TableBody>
  </Table>
</div>

## 📡 查询纪元信息（通过 gRPC 或 Http）

<Tabs items={['gRPC', 'Http']} defaultValue="gRPC">
  <Tabs.Tab>
  ```bash showLineNumbers copy
  grpcurl -plaintext https://gateway.xone.org evmos.epochs.v1.Query/EpochInfos
  ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```bash showLineNumbers copy
  curl https://gateway.xone.org/evmos/epochs/v1/epochs
  ```
  </Tabs.Tab>
</Tabs>

<Button
  href="/gateway"
  as={Link}
  className="top-6 rounded-md bg-primaryHue px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-grd-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"
  showAnchorIcon
  variant="solid"
>
  查看详情
</Button>

## 常见问题

<details>

<summary>Q1: 这对奖励分配和质押有什么影响？</summary>

所有质押奖励和更新现在都通过 epochs 钩子系统管理。奖励仍然在每个纪元结束时结算，但底层触发器现在更清晰、更安全且更易于维护。

</details>

<details>

<summary>Q2: 我可以定义自己的纪元吗？</summary>

可以。开发者可以注册新的纪元标识符（例如 weekly、custom）并通过钩子将其与特定模块关联。

</details>

<details>

<summary>Q3: 纪元间隔会保持固定吗？</summary>

默认情况下是固定的，但可以通过治理提案修改，无需代码升级。

</details>

新的纪元模块标志着 Xone Chain 模块化架构演进的重要里程碑。它增强了网络协调性，简化了未来应用程序的调度逻辑，并确保了更好的治理敏捷性——所有这些都同时保持了可预测且用户友好的区块级时序。

<ContactInfo />
import {Link} from "@nextui-org/react";
import {Table, TableHeader, TableColumn, TableBody, TableRow, TableCell} from "@nextui-org/react";
import { Callout } from 'nextra/components'
import ErrorCode from "@/components/JsonRPCErrorCode.tsx";
import DynamicLangLink from "@/components/LangLink.tsx";

# JSON RPC API

<Callout emoji="⚡">
  Xone Chain 的公共 RPC 端点是你连接网络的网关。每一个链上操作——无论是查询余额、发送交易还是部署智能合约——都始于一个 JSON‑RPC 调用。
</Callout>

<DynamicLangLink className='text-primaryHue' isExternal showAnchorIcon basePath='/study' subPath='/xone'>Xone Chain 是一条基于以太坊的 L1 公链</DynamicLangLink>，完全兼容 <Link className='text-primaryHue' isExternal showAnchorIcon href="链接6">以太坊 JSON-RPC API</Link>，并支持与主流库如 <Link className='text-primaryHue' isExternal showAnchorIcon href="链接7">Web3.js</Link> 和 <Link className='text-primaryHue' isExternal showAnchorIcon href="链接1">Ethers.js</Link> 进行交互。开发者可以使用 JSON-RPC 访问 Xone Chain，进行账户管理、交易发送、智能合约调用等操作。

## 端点

Xone Chain 提供了多个 RPC 端点，供开发者连接到主网或测试网。所有请求均使用 POST 方法。

<div className="overflow-x-auto">
  <Table key={new Date().getTime()} removeWrapper aria-label="json rpc 端点表格" className="mt-2">
    <TableHeader>
      <TableColumn key="Network">网络</TableColumn>
      <TableColumn key="Endpoint">RPC 端点</TableColumn>
      <TableColumn key="id">链 ID</TableColumn>
    </TableHeader>
    <TableBody>
      <TableRow key="1">
        <TableCell>Xone 主网</TableCell>
        <TableCell>
        `链接2`\
        `wss://rpc.xone.org`
        </TableCell>
        <TableCell>`0xe89`(3721)</TableCell>
      </TableRow>
      <TableRow key="2">
        <TableCell>Xone 测试网</TableCell>
        <TableCell>
        `链接3`\
        `链接4`\
        `链接5`\
        `wss://rpc-testnet.xone.org`
        </TableCell>
        <TableCell>`0x20352b3`(33772211)</TableCell>
      </TableRow>
    </TableBody>
  </Table>
</div>

## 快速开始

### 查询最新区块 (cURL)

```bash showLineNumbers copy
curl -X POST https://rpc.xone.org \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}'
```

### 使用 Ethers v6 连接

```js showLineNumbers copy
import { JsonRpcProvider } from "ethers";

const provider = new JsonRpcProvider("https://rpc.xone.org");
const block = await provider.getBlockNumber();
console.log(`Current block: ${block}`);
```

### 使用 Web3.js v1 连接

```js showLineNumbers copy
import Web3 from "web3";

const web3 = new Web3("wss://rpc.xone.org");
const accounts = await web3.eth.getAccounts();
```

> **提示:** 对于生产环境应用，我们推荐使用 WebSocket 端点来获得实时订阅功能（`eth_subscribe`）。

## 速率限制与最佳实践

*   **公共配额：** 每个 IP 每天 10,000 次请求（软限制）。如果你需要更高的吞吐量，请考虑自行托管节点或申请增加配额。
*   **使用批处理：** 将多个调用合并到单个请求中，以减少延迟（`eth_call` 和 `eth_estimateGas` 很适合批处理）。
*   **订阅优先使用 WebSocket：** 事件驱动的应用（如价格推送、仪表板）应通过 WebSocket 端点使用 `eth_subscribe`，而不是长轮询 `eth_getLogs`。
*   **处理重试和退避：** 可能会发生瞬时网络错误；请实现指数退避和重试时的幂等逻辑。

## 常见错误码

<ErrorCode />

## 故障排除

<Callout emoji="🛠️">
  **遇到 `METHOD_NOT_SUPPORTED`？** 请确保你在正确的网络（主网还是测试网）上调用方法，并且使用了正确的 HTTP 方法（`POST`）。
</Callout>

## 我们 ❤️ 您的反馈！

如果您对此文档有任何反馈或问题，<DynamicLangLink className='text-primaryHue' isExternal showAnchorIcon basePath='/study' subPath='/contribut'>请告知我们</DynamicLangLink>。我们非常乐意听取您的意见！